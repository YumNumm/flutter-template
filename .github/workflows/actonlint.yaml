name: ActionLint

on:
  push:
   branches:
     - '*'
  pull_request:
    branches:
     - '*'
    types:
      - opened
      - synchronize
  workflow_dispatch:

jobs:
  actionlint:
    timeout-minutes: 1
    runs-on: ubuntu-slim
    steps:
      # https://github.com/actions/checkout
      - name: Checkout
        uses: actions/checkout@93cb6efe18208431cddfb8368fd83d5badbf9bfd # v5.0.1

      # https://github.com/jdx/mise-action
      - name: Install Mise dependencies
        uses: jdx/mise-action@9dc7d5dd454262207dea3ab5a06a3df6afc8ff26 # v3.1.1
        with:
          install_args: "actionlint"

      - name: Add matcher
        run: |
          echo "::add-matcher::.github/problem_matcher/actionlint.json"

      - name: Run actionlint
        run: |
          actionlint -color

  